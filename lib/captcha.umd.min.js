var t,i;t=this,i=function(){"use strict";function t(t,i){for(var o=0;o<i.length;o++){var e=i[o];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function i(t,i){return Math.floor(Math.random()*(i-t)+t)}function o(t,o){var e=i(t,o),n=i(t,o),s=i(t,o);return"rgb(".concat(e,",").concat(n,",").concat(s,")")}return function(){function e(t){if(function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}(this,e),this.version="1.0.0",this.options={id:"",canvasId:"verifyCanvas",width:"100",height:"30",type:"blend",code:"",fillStyle:"auto"},"[object Object]"==Object.prototype.toString.call(t))for(var i in t)this.options[i]=t[i];else this.options.id=t;this.options.numArr="0,1,2,3,4,5,6,7,8,9".split(","),this.options.letterArr="a,b,c,d,e,f,g,h,i,j,k,l,m,n,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z".split(","),this._init(),this.refresh()}var n,s,h;return n=e,(s=[{key:"_init",value:function(){var t=this,i=document.getElementById(this.options.id),o=document.createElement("canvas");this.options.width=i.offsetWidth>0?i.offsetWidth:"100",this.options.height=i.offsetHeight>0?i.offsetHeight:"30",o.id=this.options.canvasId,o.width=this.options.width,o.height=this.options.height,o.style.cursor="pointer",o.innerHTML="\u60a8\u7684\u6d4f\u89c8\u5668\u7248\u672c\u4e0d\u652f\u6301canvas",i.appendChild(o),o.onclick=function(){t.refresh()}}},{key:"refresh",value:function(){this.options.code="";var t=document.getElementById(this.options.canvasId),e=null;if(t.getContext){(e=t.getContext("2d")).textBaseline="middle",e.fillStyle="auto"===this.options.fillStyle?o(180,240):this.options.fillStyle,e.fillRect(0,0,this.options.width,this.options.height);var n="";n="blend"==this.options.type?this.options.numArr.concat(this.options.letterArr):"number"==this.options.type?this.options.numArr:this.options.letterArr;for(var s=1;s<=4;s++){var h=n[i(0,n.length)];this.options.code+=h,e.font=i(this.options.height/2,this.options.height)+"px SimHei",e.fillStyle=o(50,160),e.shadowOffsetX=i(-3,3),e.shadowOffsetY=i(-3,3),e.shadowBlur=i(-3,3),e.shadowColor="rgba(0, 0, 0, 0.3)";var r=this.options.width/5*s,a=this.options.height/2,l=i(-30,30);e.translate(r,a),e.rotate(l*Math.PI/180),e.fillText(h,0,0),e.rotate(-l*Math.PI/180),e.translate(-r,-a)}for(var f=0;f<4;f++)e.strokeStyle=o(40,180),e.beginPath(),e.moveTo(i(0,this.options.width),i(0,this.options.height)),e.lineTo(i(0,this.options.width),i(0,this.options.height)),e.stroke();for(var p=0;p<this.options.width/4;p++)e.fillStyle=o(0,255),e.beginPath(),e.arc(i(0,this.options.width),i(0,this.options.height),1,0,2*Math.PI),e.fill()}}},{key:"validate",value:function(t){return(t=t.toLowerCase())==this.options.code.toLowerCase()}}])&&t(n.prototype,s),h&&t(n,h),e}()},"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(t=t||self).XxmiUtil=i();